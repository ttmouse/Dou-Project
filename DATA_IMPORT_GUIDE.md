# 数据导入功能使用指南

## 📥 功能概述

数据导入功能允许您从备份的JSON文件恢复项目数据，包括项目信息、标签和Git统计。

## 🚀 使用步骤

### 1. 打开导入界面
- 在主界面左侧边栏，找到"目录"标题旁的文件夹图标
- 点击图标打开菜单
- 选择"导入项目数据"

### 2. 选择备份文件
- 在弹出的导入界面中，点击"选择文件"
- 选择您的备份JSON文件（如 `projects-linus-format.json`）

### 3. 配置导入选项

#### 导入策略
- **合并数据**：保留现有项目，添加新项目
- **替换数据**：清除现有数据，完全导入备份数据
- **跳过已存在**：只导入不存在的项目

#### 冲突处理
- **保留现有**：当项目ID冲突时，保留现有项目数据
- **使用导入**：当项目ID冲突时，使用导入的项目数据
- **智能合并**：合并标签和Git信息，保留最新数据

### 4. 开始导入
- 配置完成后，点击"开始导入"
- 等待导入完成，查看详细结果

## 📊 支持的数据格式

兼容的JSON格式示例：
```json
[
  {
    "id": "UUID-STRING",
    "name": "项目名称",
    "path": "/path/to/project",
    "tags": ["标签1", "标签2"],
    "created": 1640995200.0,
    "mtime": 1640995200.0,
    "git_commits": 10,
    "git_last_commit": 1640995200.0
  }
]
```

## ✅ 导入结果说明

导入完成后会显示详细统计：
- **总项目数**：备份文件中的项目总数
- **成功导入**：成功导入的项目数量
- **跳过项目**：因策略设置跳过的项目数
- **冲突处理**：发生冲突并处理的项目数
- **新增标签**：导入过程中新增的标签数量
- **错误数量**：导入失败的项目数量

## ⚠️ 注意事项

1. **备份现有数据**：建议在导入前备份当前数据
2. **文件格式**：确保JSON文件格式正确
3. **路径有效性**：导入的项目路径应该存在于文件系统中
4. **标签颜色**：新导入的标签会自动分配颜色
5. **Git信息**：Git统计信息会从文件系统重新加载
6. **时间戳处理**：自动识别Unix时间戳和Mac纪元时间戳格式

## 🔧 故障排除

### 导入失败
- 检查JSON文件格式是否正确
- 确认文件编码为UTF-8
- 检查项目路径是否存在

### 部分项目跳过
- 检查导入策略设置
- 确认项目ID是否已存在

### 标签丢失
- 检查JSON中的tags字段
- 确认标签名称格式正确

## 📝 最佳实践

1. **测试导入**：先用小批量数据测试导入功能
2. **策略选择**：根据需求选择合适的导入策略
3. **定期备份**：定期导出项目数据作为备份
4. **验证结果**：导入后检查项目和标签是否正确

## 🆘 获取帮助

如果遇到问题，请：
1. 查看导入结果中的错误信息
2. 检查控制台输出的调试信息
3. 确认备份文件的完整性